<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Happy Birthday Quackers! 🎂</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Outfit:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- Global Styles & Variables --- */
        :root {
            --primary-pink: #ff69b4; /* Hot Pink */
            --secondary-deep-pink: #ff1493; /* Deep Pink */
            --indigo-purple: #4b0082; /* Indigo */
            --dark-orchid-purple: #6a0dad; /* Dark Orchid */
            --dark-magenta-purple: #8b008b; /* Dark Magenta */
            --lavender-blush-bg: #fff0f5; /* Lavender Blush */
            --lavender-bg: #e6e6fa; /* Lavender */
            --light-cream-bg: #fdf5e6; /* Light Cream for main content */
            --button-light-pink: #ffd1dc; /* Light Pink for buttons */
            --button-hover-pink: #ffb6c1; /* Lighter Pink for button hover */
            --love-meter-bg: #ffe6f0; /* Light Pink for love meter background */
            --love-meter-text: #c71585; /* Medium Pink for love meter text */
            --love-meter-bar-bg: #ffe6e6; /* Even Lighter Pink for love meter bar background */
            --message-green-bg: #e6fae6; /* Quaternary Green for message background */
            --tertiary-blue-border: #b0e0e6; /* Tertiary Blue for message border */
            --accent-red-border: #ffe6e6; /* Accent Red for inline GIF border */
            --white: #ffffff;
            --shadow-light: rgba(0,0,0,0.1);
            --shadow-medium: rgba(0,0,0,0.2);
            --border-radius-small: 0.5rem; /* 8px */
            --border-radius-medium: 1rem; /* 16px */
            --border-radius-large: 2rem; /* 32px */
            --spacing-unit: 1rem; /* 16px */
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif; /* Changed to Comic Sans MS */
            background: linear-gradient(135deg, var(--lavender-blush-bg), var(--lavender-bg));
            color: var(--indigo-purple); /* Darker purple for main text */
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            text-align: center;
            position: relative;
            line-height: 1.6;
        }

        /* --- Typography --- */
        h1 {
            font-family: 'Pacifico', cursive; /* Playful, decorative font */
            font-size: clamp(2.5rem, 6vw, 4rem); /* Larger, more impactful heading */
            color: var(--primary-pink);
            text-shadow: 2px 2px 4px var(--shadow-light);
            animation: popIn 1s ease-in-out; /* Changed to popIn */
            margin-top: 0;
            margin-bottom: var(--spacing-unit);
            line-height: 1.2;
        }

        p {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            color: var(--dark-orchid-purple); /* Softer purple for general text */
            animation: popIn 1.2s ease-in-out; /* Changed to popIn */
            line-height: 1.7;
        }

        .message {
            background-color: var(--message-green-bg);
            padding: calc(1.5 * var(--spacing-unit));
            border-radius: var(--border-radius-medium);
            box-shadow: inset 0 2px 5px var(--shadow-light);
            border: 1px solid var(--tertiary-blue-border);
            margin-bottom: calc(1.5 * var(--spacing-unit));
            font-size: clamp(0.95rem, 2.2vw, 1.1rem);
            color: var(--indigo-purple);
        }

        /* --- Buttons --- */
        .btn {
            background-color: var(--button-light-pink);
            border: none;
            padding: 1rem 2rem; /* Adjusted padding to match provided code */
            margin: 0.5rem; /* Adjusted margin to match provided code */
            border-radius: var(--border-radius-large); /* Keeping larger radius for modern look */
            font-size: 1.1rem; /* Adjusted font size to match provided code */
            font-weight: bold; /* Adjusted font weight to match provided code */
            color: var(--dark-magenta-purple);
            box-shadow: 0 4px 8px var(--shadow-light);
            cursor: pointer;
            transition: transform 0.2s ease, background-color 0.3s; /* Transition from provided code */
            outline: none; /* Remove default focus outline */
        }

        .btn:hover {
            background-color: var(--button-hover-pink);
            transform: scale(1.05); /* Effect from provided code */
        }

        .btn:active {
            transform: scale(1); /* Reset to normal size on click */
            box-shadow: 0 2px 5px var(--shadow-light); /* Subtle shadow on press */
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-top: calc(2 * var(--spacing-unit));
        }

        /* --- Content Wrappers --- */
        .container {
            padding: 2rem;
        }

        .button-content-wrapper {
            display: none;
            margin-top: calc(1.5 * var(--spacing-unit));
            padding: var(--spacing-unit);
            background-color: var(--lavender-blush-bg);
            border-radius: var(--border-radius-medium);
            box-shadow: 0 4px 15px var(--shadow-medium);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            border: 1px solid var(--secondary-deep-pink);
        }

        .button-content-wrapper.active {
            display: block;
            animation: fadeIn 0.8s ease forwards; /* Clean fadeIn for content */
        }

        .message-display {
            font-size: clamp(1.1rem, 2.8vw, 1.5rem);
            background-color: var(--lavender-blush-bg);
            border-radius: var(--border-radius-medium);
            padding: var(--spacing-unit);
            box-shadow: 0 0 10px var(--lavender-bg);
            display: inline-block;
            max-width: 100%;
            box-sizing: border-box;
            color: var(--indigo-purple);
            animation: popIn 0.5s ease; /* Changed to popIn */
        }

        #hugGifDisplay {
            max-width: 300px;
            height: auto;
            border-radius: var(--border-radius-medium);
            box-shadow: 0 0 15px rgba(255, 192, 203, 0.6);
            animation: popIn 0.5s ease; /* Changed to popIn */
            display: block;
            margin: 0 auto;
        }

        /* --- Footer --- */
        footer {
            margin-top: calc(3 * var(--spacing-unit));
            font-size: clamp(0.9rem, 2vw, 1rem);
            color: var(--dark-magenta-purple);
            opacity: 0.7;
            font-weight: 300;
        }

        /* --- Love Meter --- */
        #loveMeter {
            margin: calc(2 * var(--spacing-unit)) auto;
            max-width: 500px;
            padding: var(--spacing-unit);
            background-color: var(--love-meter-bg);
            border-radius: 1.5rem;
            box-shadow: 0 0 10px var(--button-hover-pink);
            font-size: clamp(1.1rem, 2.5vw, 1.2rem);
            color: var(--love-meter-text);
            border: 2px dashed var(--dark-orchid-purple);
        }

        .love-progress-bar-container {
            width: 100%;
            height: 1rem;
            background: var(--love-meter-bar-bg);
            border-radius: 1rem;
            margin: 0.5rem 0 1rem;
            overflow: hidden;
            box-shadow: inset 0 1px 3px var(--shadow-light);
        }

        .love-progress-bar {
            height: 100%;
            background: linear-gradient(to right, var(--primary-pink), var(--secondary-deep-pink));
            width: 0%;
            transition: width 0.5s ease-in-out;
            border-radius: var(--border-radius-large) 0 0 var(--border-radius-large);
        }

        .love-progress-bar[style*="width: 100%"] {
            border-radius: var(--border-radius-large);
        }

        .love-status-message {
            font-size: clamp(0.9rem, 2vw, 1rem);
            color: var(--love-meter-text);
            margin-top: 0.5rem;
            font-style: italic;
        }

        /* --- Confetti --- */
        #confettiLayer {
            pointer-events: none;
            position: fixed;
            inset: 0;
            z-index: 999;
        }

        .confetti-piece {
            position: absolute;
            width: 1rem; /* Adjusted to match provided code */
            height: 1rem; /* Adjusted to match provided code */
            opacity: 0.8; /* Adjusted to match provided code */
            border-radius: 50%;
            animation: fallConfetti linear;
        }

        @keyframes fallConfetti {
            0% { transform: translateY(-100px) rotate(0deg); } /* Adjusted to match provided code */
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } /* Adjusted to match provided code */
        }

        /* --- Hearts & Balloons --- */
        .floating-heart {
            position: fixed;
            font-size: clamp(1.5rem, 3.5vw, 2rem);
            color: var(--primary-pink);
            animation: floatUp 6s ease-in-out forwards; /* Adjusted duration to match provided code */
            z-index: 99;
            pointer-events: none;
        }

        @keyframes floatUp {
            0% { bottom: -2rem; opacity: 0; transform: translateX(0) scale(0.7); } /* Adjusted to match provided code */
            25% { opacity: 1; } /* Added from provided code */
            100% { bottom: 100vh; opacity: 0; transform: translateX(0) scale(1.1); } /* Adjusted to match provided code */
        }

        .floating-balloon {
            position: fixed;
            width: 2rem; /* Adjusted to match provided code */
            height: 3rem; /* Adjusted to match provided code */
            background: radial-gradient(circle at 30% 30%, var(--button-hover-pink), var(--primary-pink));
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: balloonFloat 6s ease-in-out forwards; /* Adjusted duration to match provided code */
            z-index: 98;
            pointer-events: none;
        }

        @keyframes balloonFloat {
            0% { bottom: -3rem; opacity: 0; transform: translateX(0) rotate(0deg); } /* Adjusted to match provided code */
            25% { opacity: 1; } /* Added from provided code */
            100% { bottom: 100vh; opacity: 0; transform: translateX(0) rotate(360deg); } /* Adjusted to match provided code */
        }

        /* --- Animations --- */
        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Intro Popup --- */
        .popup {
            position: fixed;
            inset: 0;
            background-color: rgba(255, 240, 245, 0.98);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            text-align: center;
            transition: opacity 0.6s ease, visibility 0.6s ease;
        }

        .popup-card {
            background: var(--white);
            padding: calc(2 * var(--spacing-unit));
            border-radius: var(--border-radius-large);
            box-shadow: 0 10px 30px var(--primary-pink);
            animation: popIn 1s ease; /* Changed to popIn */
            max-width: 90vw;
            width: 500px;
            cursor: pointer;
            border: 5px solid var(--primary-pink);
            position: relative;
            box-sizing: border-box;
        }

        .popup.hidden-transition {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .popup-card h2 {
            font-family: 'Pacifico', cursive;
            font-size: clamp(1.8rem, 3.8vw, 2.5rem);
            color: var(--secondary-deep-pink);
            margin-top: calc(1.5 * var(--spacing-unit));
            line-height: 1.3;
            text-shadow: 1px 1px 2px var(--shadow-light);
        }

        .popup-card .gif-top {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%) rotate(-5deg);
            width: clamp(80px, 15vw, 120px);
            height: auto;
            border-radius: var(--border-radius-small);
            box-shadow: 0 5px 15px var(--shadow-medium);
            border: 3px solid var(--lavender-bg);
        }

        .popup-card .gif-main {
            width: 80%;
            max-width: 280px;
            height: auto;
            border-radius: var(--border-radius-medium);
            box-shadow: 0 8px 20px var(--shadow-medium);
            border: 4px solid var(--lavender-bg);
            margin: var(--spacing-unit) auto;
            display: block;
        }

        /* --- Main Content --- */
        #mainContent {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s ease, transform 1s ease;
            background: var(--light-cream-bg);
            padding: calc(2.5 * var(--spacing-unit));
            border-radius: var(--border-radius-large);
            box-shadow: 0 15px 40px var(--shadow-medium);
            max-width: 900px;
            width: 95%;
            text-align: center;
            border: 5px dashed var(--lavender-bg);
            margin: calc(2 * var(--spacing-unit)) auto;
            box-sizing: border-box;
        }

        #mainContent.visible-transition {
            opacity: 1;
            transform: translateY(0);
        }

        .gif-inline-container {
            margin: calc(1.5 * var(--spacing-unit)) auto;
            width: fit-content;
            border: 4px solid var(--accent-red-border);
            border-radius: var(--border-radius-medium);
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow-medium);
            animation: fadeIn 1s ease-out forwards;
            display: block;
        }

        .gif-inline-container img {
            display: block;
            width: 100%;
            max-width: 250px;
            height: auto;
        }

        /* --- Magical Background Blobs --- */
        .background-blob {
            position: absolute;
            border-radius: 50%;
            opacity: 0.6; /* Adjusted to match provided code */
            filter: blur(80px); /* Adjusted to match provided code */
            animation: floatBlob 20s infinite ease-in-out; /* Adjusted duration to match provided code */
            z-index: -1;
        }

        .background-blob:nth-child(1) {
            width: clamp(250px, 30vw, 350px); /* Adjusted min width to match provided code */
            height: clamp(250px, 30vw, 350px); /* Adjusted min height to match provided code */
            background-color: var(--primary-pink);
            top: 10%; /* Adjusted to match provided code */
            left: 15%; /* Adjusted to match provided code */
            animation-delay: 0s;
        }

        .background-blob:nth-child(2) {
            width: clamp(300px, 35vw, 400px); /* Adjusted min width to match provided code */
            height: clamp(300px, 35vw, 400px); /* Adjusted min height to match provided code */
            background-color: var(--lavender-bg);
            bottom: 5%; /* Adjusted to match provided code */
            right: 10%; /* Adjusted to match provided code */
            animation-delay: 5s; /* Adjusted to match provided code */
        }

        .background-blob:nth-child(3) {
            width: clamp(200px, 25vw, 300px); /* Adjusted min width to match provided code */
            height: clamp(200px, 25vw, 300px); /* Adjusted min height to match provided code */
            background-color: var(--tertiary-blue-border);
            top: 30%; /* Adjusted to match provided code */
            right: 20%; /* Adjusted to match provided code */
            animation-delay: 10s; /* Adjusted to match provided code */
        }

        .background-blob:nth-child(4) {
            width: clamp(350px, 40vw, 450px); /* Adjusted min width to match provided code */
            height: clamp(350px, 40vw, 450px); /* Adjusted min height to match provided code */
            background-color: var(--message-green-bg);
            bottom: 20%; /* Adjusted to match provided code */
            left: 25%; /* Adjusted to match provided code */
            animation-delay: 15s; /* Adjusted to match provided code */
        }

        @keyframes floatBlob {
            0% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(20px, -30px) scale(1.05); } /* Adjusted to match provided code */
            50% { transform: translate(0, 0) scale(1); }
            75% { transform: translate(-20px, 30px) scale(0.95); } /* Adjusted to match provided code */
            100% { transform: translate(0, 0) scale(1); }
        }

        /* --- Sparkles --- */
        .sparkle {
            position: fixed;
            width: 4px; /* Adjusted to match provided code */
            height: 4px; /* Adjusted to match provided code */
            background-color: var(--white);
            border-radius: 50%;
            box-shadow: 0 0 8px var(--white), 0 0 12px var(--primary-pink); /* Adjusted to match provided code */
            opacity: 0;
            animation: sparkleFadeIn 3s ease-out forwards; /* Adjusted duration to match provided code */
            z-index: 100;
        }

        @keyframes sparkleFadeIn {
            0% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); } /* Adjusted to match provided code */
            100% { opacity: 0; transform: scale(0.5); } /* Adjusted to match provided code */
        }

        /* --- Reveal on Scroll (JavaScript driven) --- */
        .content, .gif-inline-container, .button-group, #loveMeter {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .content.reveal, .gif-inline-container.reveal, .button-group.reveal, #loveMeter.reveal {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Responsive adjustments --- */
        @media (max-width: 768px) {
            .content h1 {
                font-size: 2.2rem;
            }
            .message {
                font-size: 1rem;
            }
            .btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            .popup-card h2 {
                font-size: 1.5rem;
            }
            .popup-card .gif-top {
                width: 80px;
                top: -20px;
            }
        }

        @media (max-width: 480px) {
            .content {
                padding: 20px;
            }
            .content h1 {
                font-size: 1.8rem;
            }
            .message {
                font-size: 0.9rem;
            }
            .btn {
                width: 100%;
            }
            .popup-card h2 {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>

    <div class="background-blob"></div>
    <div class="background-blob"></div>
    <div class="background-blob"></div>
    <div class="background-blob"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const numSparkles = 25;
            for(let i = 0; i < numSparkles; i++) {
                const s = document.createElement('div');
                s.className = 'sparkle';
                s.style.left = Math.random() * 100 + 'vw';
                s.style.top = Math.random() * 100 + 'vh';
                s.style.animationDelay = Math.random() * 5 + 's';
                document.body.appendChild(s);
            }

            const revealElements = document.querySelectorAll('.content, .gif-inline-container, .button-group, #loveMeter');
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('reveal');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.3 });

            revealElements.forEach(el => observer.observe(el));
        });
    </script>

    <div class="popup" id="introPopup">
        <div class="popup-card" id="popupClickArea" role="button" aria-label="Click to unwrap birthday surprise">
            <img class="gif-top" src="https://media.tenor.com/6yBqtjeP1ekAAAAj/bubu-dudu-sseeyall.gif" alt="Bubu Dudu See Ya!" loading="lazy">
            <img class="gif-main" src="https://media.tenor.com/s5AoXjOy4NsAAAAj/birthday-cake.gif" alt="Birthday Cake GIF" loading="lazy">
            <h2>Click to Unwrap Your Birthday Surprise, Quackers! ✨</h2>
        </div>
    </div>

    <main class="content" id="mainContent">
        <h1>Happy Birthday, my wonderful Quackers! <span aria-hidden="true">💖</span></h1>

        <div class="gif-inline-container">
            <img src="https://media.tenor.com/kDB-vGnoBmUAAAAj/bubu-dudu-sseeyall.gif" alt="Bubu Dudu Excited GIF" loading="lazy" />
        </div>

        <p class="message">
            Hey sweet Quackers! <span aria-hidden="true">🦆</span><br><br>
            Your Doofy here, showering you with *gentle* hug energy and warm smiles!
            Just like these adorable friends, I'm so excited to celebrate you today.
            You’re the sparkle in my life, the softest comfort, and the sweetest reason to smile.
            <br><br>
            May today bring gentle laughter, soft hugs, and a heart full of warmth. <span aria-hidden="true">💕</span>
        </p>

        <div class="gif-inline-container">
            <img src="https://media.tenor.com/naYMunSvaa8AAAAj/eating-cake.gif" alt="Bubu Dudu Eating Cake GIF" loading="lazy" />
        </div>

        <div class="button-group">
            <button id="hugBtn" class="btn" aria-controls="hugContentWrapper">Send a Gentle Hug <span aria-hidden="true">🫂</span></button>
            <button id="complimentsBtn" class="btn" aria-controls="complimentContentWrapper">Compliments <span aria-hidden="true">✨</span></button>
            <button id="celebrateBtn" class="btn">Let's Celebrate! <span aria-hidden="true">🎉</span></button>
            <button id="doofyMagicBtn" class="btn" aria-controls="doofyMagicWrapper">Doofy Magic <span aria-hidden="true">💫</span></button>
        </div>

        <div class="button-content-wrapper" id="hugContentWrapper">
            <img id="hugGifDisplay" src="" alt="Hug GIF Display">
        </div>
        <div class="button-content-wrapper" id="complimentContentWrapper">
            <p class="message-display" id="complimentMessageDisplay"></p>
        </div>
        <div class="button-content-wrapper" id="doofyMagicWrapper">
            <p class="message-display" id="doofyMagicMessage"></p>
        </div>

        <div id="loveMeter">
            Doofy’s Love Meter: <span id="loveCount">0</span> <span aria-hidden="true">💗</span>
            <div class="love-progress-bar-container">
                <div class="love-progress-bar" id="loveProgressBar"></div>
            </div>
            <p id="loveStatusMessage" class="love-status-message">Just starting our love journey! ✨</p>
        </div>

        <div id="confettiLayer"></div>

        <footer>Always your Doofy <span aria-hidden="true">🐾💖</span></footer>
    </main>

    <script>
        const introPopup = document.getElementById('introPopup');
        const popupClickArea = document.getElementById('popupClickArea');
        const mainContent = document.getElementById('mainContent');

        const hugBtn = document.getElementById('hugBtn');
        const complimentsBtn = document.getElementById('complimentsBtn');
        const celebrateBtn = document.getElementById('celebrateBtn');
        const doofyMagicBtn = document.getElementById('doofyMagicBtn');

        const hugContentWrapper = document.getElementById('hugContentWrapper');
        const hugGifDisplay = document.getElementById('hugGifDisplay');
        const complimentContentWrapper = document.getElementById('complimentContentWrapper');
        const complimentMessageDisplay = document.getElementById('complimentMessageDisplay');
        const doofyMagicWrapper = document.getElementById('doofyMagicWrapper');
        const doofyMagicMessage = document.getElementById('doofyMagicMessage');

        const loveCountSpan = document.getElementById('loveCount');
        const loveProgressBar = document.getElementById('loveProgressBar');
        const loveStatusMessage = document.getElementById('loveStatusMessage');
        const confettiLayer = document.getElementById('confettiLayer');

        const hugGifs = [
            "https://media.tenor.com/ScOwzW70wHIAAAAj/bubu.gif",
            "https://media.tenor.com/2bw-Zzp-mTMAAAAj/bear-hug.gif",
            "https://media.tenor.com/F2SQcVd5fMIAAAAj/hug-couple.gif",
            "https://media.tenor.com/vzkveVGDzmAAAAj/dudu-hug-bubu-dudu-kiss.gif",
            "https://media.tenor.com/fFpVFqD_4esAAAAj/peluk.gif",
            "https://media.tenor.com/RG_lIajbbtQAAAAj/milk-and-mocha.gif",
            "https://media.tenor.com/YfaICXGzuSoAAAAj/i-love-you-i-missed-you.gif"
        ];

        const compliments = [
            "You are incredibly kind! 😊",
            "Your smile brightens my day! ☀️",
            "You're wonderfully unique! 🌟",
            "Your strength is inspiring! 💪",
            "You bring so much joy! 😂",
            "You're so thoughtful! 🤔",
            "You're amazing! ✨",
            "Your laughter is contagious! 😄",
            "You're a true gem! 💎",
            "You're beautiful inside and out! 💖"
        ];

        const magicMessages = [
            "✨ A magical moment just for you, Quackers!",
            "🎩 Poof! Doofy just summoned extra love into your heart!",
            "💫 A sparkle spell for the sweetest girl ever!",
            "🪄 Surprise! You just gained +1000 adorableness points!",
            "🌈 Doofy’s Magic Beam activated — happiness level MAXED!",
            "⭐ You're glowing brighter than all the stars tonight!",
            "💥 Bam! That was a Doofy love explosion 💖"
        ];

        let loveCount = 0;
        const maxLove = 100;
        const loveMessages = {
            0: "Just starting our love journey! ✨",
            10: "A little love blooming! 🌷",
            25: "Love is growing strong! 🌱",
            50: "Halfway to pure bliss! 💖",
            75: "Almost overflowing with love! 🥰",
            90: "Unconditional love! ❤️‍🔥",
            100: "Love meter is FULL! Pure adoration! 💞"
        };

        const confettiColors = ['#ffcccb', '#dcd0ff', '#b0e0e6', '#e6fae6', '#ffe6e6'];

        function updateLoveMeter(amount) {
            loveCount = Math.min(maxLove, loveCount + amount);
            loveCountSpan.textContent = loveCount;
            loveProgressBar.style.width = `${loveCount}%`;

            let currentMessage = loveMessages[0];
            for (const threshold in loveMessages) {
                if (loveCount >= parseInt(threshold)) {
                    currentMessage = loveMessages[threshold];
                }
            }
            loveStatusMessage.textContent = currentMessage;

            if (loveCount === 50 && amount > 0) triggerConfetti(50);
            if (loveCount === 100 && amount > 0) triggerConfetti(100);
        }

        function triggerConfetti(count = 30) {
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti-piece';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = `${-10 - Math.random() * 20}vh`; /* Adjusted for the new animation */
                confetti.style.backgroundColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                confetti.style.animationDelay = Math.random() * 0.8 + 's'; /* Adjusted for the new animation */
                confetti.style.animationDuration = (Math.random() * 2 + 3) + 's'; /* Adjusted for the new animation */
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;

                confettiLayer.appendChild(confetti);
                confetti.addEventListener('animationend', () => confetti.remove());
            }
        }

        function createFloatingHeart() {
            const heart = document.createElement('div');
            heart.className = 'floating-heart';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 7) + 's'; /* Adjusted for the new animation */
            heart.style.animationDelay = Math.random() * 2 + 's';
            heart.textContent = '💖';
            document.body.appendChild(heart);
            heart.addEventListener('animationend', () => heart.remove());
        }

        function createFloatingBalloon() {
            const balloon = document.createElement('div');
            balloon.className = 'floating-balloon';
            balloon.style.left = Math.random() * 80 + 10 + 'vw';
            balloon.style.animationDuration = (Math.random() * 4 + 9) + 's'; /* Adjusted for the new animation */
            balloon.style.animationDelay = Math.random() * 3 + 's';
            document.body.appendChild(balloon);
            balloon.addEventListener('animationend', () => balloon.remove());
        }

        function hideAllButtonContent() {
            document.querySelectorAll('.button-content-wrapper').forEach(wrapper => {
                wrapper.classList.remove('active');
                if (wrapper.id === 'complimentContentWrapper' || wrapper.id === 'doofyMagicWrapper') {
                     wrapper.querySelector('.message-display').textContent = '';
                } else if (wrapper.id === 'hugContentWrapper') {
                    wrapper.querySelector('#hugGifDisplay').src = '';
                }
            });
        }

        popupClickArea.addEventListener('click', () => {
            introPopup.classList.add('hidden-transition');
            introPopup.addEventListener('transitionend', () => {
                introPopup.style.display = 'none';
                mainContent.classList.add('visible-transition');
            }, { once: true });
        });

        hugBtn.addEventListener('click', () => {
            hideAllButtonContent();
            const randomGif = hugGifs[Math.floor(Math.random() * hugGifs.length)];
            hugGifDisplay.src = randomGif;
            hugContentWrapper.classList.add('active');
            hugContentWrapper.appendChild(hugGifDisplay);
            updateLoveMeter(5);
            for(let i = 0; i < 3; i++) createFloatingHeart();
        });

        complimentsBtn.addEventListener('click', () => {
            hideAllButtonContent();
            const randomCompliment = compliments[Math.floor(Math.random() * compliments.length)];
            complimentMessageDisplay.textContent = randomCompliment;
            complimentContentWrapper.classList.add('active');
            complimentMessageDisplay.style.animation = 'none';
            void complimentMessageDisplay.offsetWidth;
            complimentMessageDisplay.style.animation = 'popIn 0.5s ease-out forwards';
            updateLoveMeter(10);
        });

        celebrateBtn.addEventListener('click', () => {
            hideAllButtonContent();
            triggerConfetti(70);
            updateLoveMeter(15);
            for(let i = 0; i < 5; i++) createFloatingBalloon();
        });

        doofyMagicBtn.addEventListener('click', () => {
            hideAllButtonContent();
            const magic = magicMessages[Math.floor(Math.random() * magicMessages.length)];
            doofyMagicMessage.textContent = magic;
            doofyMagicWrapper.classList.add('active');
            doofyMagicMessage.style.animation = 'none';
            void doofyMagicMessage.offsetWidth;
            doofyMagicMessage.style.animation = 'popIn 0.5s ease-out forwards';
            updateLoveMeter(20);
            triggerConfetti(40);
            for(let i = 0; i < 2; i++) createFloatingHeart();
            for(let i = 0; i < 2; i++) createFloatingBalloon();
        });

        updateLoveMeter(0);
    </script>
</body>
</html>
